# Исправление CORS для GitHub Pages

## Проблема
При размещении сайта на GitHub Pages (https://rotmansells.github.io) возникают ошибки CORS при обращении к Google Apps Script:
```
Access to fetch at 'https://script.google.com/...' from origin 'https://rotmansells.github.io' 
has been blocked by CORS policy
```

## Решение

### Шаг 1: Обновите Google Apps Script

1. Откройте ваш Google Apps Script проект
2. Скопируйте весь код из файла `google-apps-script-improved.gs` в редактор Google Apps Script
3. Сохраните проект (Ctrl+S или Cmd+S)

### Шаг 2: Настройте развертывание

1. Нажмите **"Развернуть"** → **"Управление развертываниями"**
2. Если развертывание уже существует:
   - Нажмите на значок **"Редактировать"** (карандаш)
   - Убедитесь, что настройки следующие:
     - **Тип развертывания**: Веб-приложение
     - **Выполнять от имени**: Меня (ваш email)
     - **У кого есть доступ**: **Все** (критически важно!)
   - Нажмите **"Развернуть"**
3. Если развертывания нет:
   - Нажмите **"Развернуть"** → **"Новое развертывание"**
   - Выберите тип: **Веб-приложение**
   - Настройки:
     - **Описание**: "Salon Booking API"
     - **Выполнять от имени**: Меня (ваш email)
     - **У кого есть доступ**: **Все** (критически важно!)
   - Нажмите **"Развернуть"**
4. Скопируйте URL развертывания

### Шаг 3: Обновите URL в коде (если изменился)

Если URL развертывания изменился, обновите его в файле `js/googleSheets.js`:

```javascript
const scriptUrl = 'ВАШ_НОВЫЙ_URL_РАЗВЕРТЫВАНИЯ';
```

### Шаг 4: Закоммитьте и отправьте изменения

Изменения в коде уже внесены:
- Операции чтения (getBookings, getProcedures, getClients, getSettings) теперь используют GET запросы
- Операции записи (createBooking, updateBooking, deleteBooking и т.д.) используют POST запросы
- Google Apps Script обновлен для поддержки GET запросов

Просто закоммитьте и отправьте изменения на GitHub:

```bash
git add .
git commit -m "Fix CORS for GitHub Pages - use GET for read operations"
git push
```

### Шаг 5: Проверьте работу

1. Подождите несколько минут, пока GitHub Pages обновится
2. Откройте ваш сайт: https://rotmansells.github.io/beauty-salon-booking/
3. Проверьте консоль браузера (F12) - ошибки CORS должны исчезнуть

## Почему это работает?

- **GET запросы** не требуют preflight OPTIONS запроса, поэтому браузер не блокирует их
- **POST запросы** для операций записи работают, так как Google Apps Script правильно настроен
- Настройка **"У кого есть доступ: Все"** позволяет обращаться к скрипту с любого домена

## Важные замечания

- ⚠️ **"У кого есть доступ"** должно быть установлено в **"Все"** - это критично!
- После изменения настроек развертывания URL может измениться - обновите его в коде
- Если проблемы сохраняются, проверьте, что вы скопировали обновленный код в Google Apps Script

